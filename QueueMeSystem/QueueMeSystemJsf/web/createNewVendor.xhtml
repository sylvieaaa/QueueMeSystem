<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./template/defaultTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">

        <br/>
        <br/>

        <div class="ui-g-12 ui-md-6 ui-lg-4"></div>
        <div class ="ui-g-12 ui-md-6 ui-lg-4">

            <p:panel style="display: block; text-align:center; width: 550px">
                <h1><h:outputText style="color:blue" value="#{sessionScope['businessEntity'].name}"/></h1>
                <h3>Add New Vendor</h3>

                <h:form>
                    <p:growl id="growl" showDetail="true" autoUpdate="true"/>

                    <p:wizard flowListener="#{createNewVendorManagedBean.onFlowProcess}" id="wizardVendorLogo">
                        <p:tab id="vendorLogo" title="Upload">
                            <p:messages id="uploadMessage"/>
                            <p:panel header="Upload Vendor Logo">
                                <p:panelGrid>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel for="vendorLogoUpload" value="Upload Logo: "/>
                                        </p:column>
                                        <p:column>
                                            <p:fileUpload required="true" id="vendorLogoUpload" widgetVar="uploader" mode="advanced" update="uploadMessage" skinSimple="true" fileUploadListener="#{createNewVendorManagedBean.upload}" fileLimit="1" allowTypes="/(\.|\/)(gif|jpe?g|png)$/">
                                            </p:fileUpload>
                                        </p:column>
                                        <p:column>
                                            <p:message for="vendorLogoUpload" />
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:panel>
                        </p:tab>

                        <p:tab id="addVendorForm" title="Add Vendor">
                            <p:panel header="Vendor Details">
                                <p:messages />
                                <p:panelGrid id="test">
                                    <p:row>
                                        <p:column><p:outputLabel for="name" value="Name: "/></p:column>
                                        <p:column><p:inputText id="name" value="#{createNewVendorManagedBean.newVendorEntity.vendorName}" required="true" requiredMessage="Vendor name required." /></p:column>
                                        <p:column><p:message for="name" /></p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column><p:outputLabel for="cuisine" value="Cuisine: " /></p:column>
                                        <p:column>
                                            <p:selectOneMenu id="cuisine" value="#{createNewVendorManagedBean.newVendorEntity.cuisineType}" required="true" requiredMessage="Cuisine type required.">
                                                <f:selectItem itemLabel="Select Cuisine" itemValue="null" noSelectionOption="true"/>
                                                <f:selectItems value="#{createNewVendorManagedBean.vendorTypes}" var="type" itemLabel="#{type}" itemValue="#{type}"/>
                                            </p:selectOneMenu>
                                        </p:column>
                                        <p:column><p:message for="cuisine" /></p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column><p:outputLabel for="information" value="Information: " /></p:column>
                                        <p:column><p:inputTextarea id="information" value="#{createNewVendorManagedBean.newVendorEntity.information}" required="true" requiredMessage="Information required."/>  </p:column>                  
                                        <p:column><p:message for="information" /></p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column><p:outputLabel for="operatingHours" value="Operating Hours: " /></p:column>
                                        <p:column>
                                            <p:calendar pattern="HH:mm:ss" timeOnly="true" value="#{createNewVendorManagedBean.newVendorEntity.startTime}" required="true" requiredMessage="Start time required." />
                                            &nbsp;&nbsp;<h:outputText style="font-size: 15px" value="to"></h:outputText>&nbsp;&nbsp;   
                                            <p:calendar id="operatingHours" pattern="HH:mm:ss" timeOnly="true" value="#{createNewVendorManagedBean.newVendorEntity.endTime}" required="true" requiredMessage="End time required." />
                                        </p:column>
                                        <p:column><p:message for="operatingHours" /></p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column><p:outputLabel for="username" value="Username:  "/></p:column>
                                        <p:column>
                                            <p:inputText id="username" value="#{createNewVendorManagedBean.newVendorEntity.username}" required="true" requiredMessage="Username required." validatorMessage="Invalid email format">
                                                <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" for="username" />
                                            </p:inputText>
                                        </p:column>
                                        <p:column><p:message for="username" display="text" /></p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column><p:outputLabel for="password" value="Password: "/></p:column>
                                        <p:column>
                                            <p:password id="password" value="#{createNewVendorManagedBean.newVendorEntity.password}" required="true" requiredMessage="Password required." />
                                        </p:column>
                                        <p:column><p:message for="password" /></p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column colspan="3" style="text-align: center">
                                            <p:commandButton id="addVendor" value="Add New Vendor" type="submit" actionListener="#{createNewVendorManagedBean.createNewVendor}" update="growl"> 
                                                <f:ajax execute="@form" resetValues="true"/>
                                            </p:commandButton> &nbsp;
                                            <p:commandButton value="Clear" type="reset"/>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:panel>
                        </p:tab>


                    </p:wizard>
                </h:form>
            </p:panel>

        </div>
        <div class="ui-g-12 ui-md-6 ui-lg-4"></div>
    </ui:define>

</ui:composition>
